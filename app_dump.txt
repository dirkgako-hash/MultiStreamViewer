üìÅ Dump de ficheiros
Base: /workspaces/MultiStreamViewer/app
Data: Tue Dec 23 10:13:10 UTC 2025
========================================

----------------------------------------
FILE: build.gradle
----------------------------------------

plugins {
    id 'com.android.application'
}

android {
    namespace 'com.example.multistreamviewer'
    compileSdk 34

    defaultConfig {
        applicationId "com.example.multistreamviewer"
        minSdk 21
        targetSdk 34
        versionCode 1
        versionName "1.0"

        testInstrumentationRunner "androidx.test.runner.AndroidJUnitRunner"
    }

    buildTypes {
        release {
            minifyEnabled false
            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'
        }
    }
    compileOptions {
        sourceCompatibility JavaVersion.VERSION_1_8
        targetCompatibility JavaVersion.VERSION_1_8
    }
}

dependencies {
    implementation 'androidx.appcompat:appcompat:1.6.1'
    implementation 'com.google.android.material:material:1.10.0'
    implementation 'androidx.constraintlayout:constraintlayout:2.1.4'
    implementation 'androidx.gridlayout:gridlayout:1.0.0'
    implementation 'androidx.core:core:1.12.0'
    testImplementation 'junit:junit:4.13.2'
    androidTestImplementation 'androidx.test.ext:junit:1.1.5'
    androidTestImplementation 'androidx.test.espresso:espresso-core:3.5.1'
}


----------------------------------------
FILE: proguard-rules.pro
----------------------------------------

# Add project specific ProGuard rules here.
-keep class com.google.android.exoplayer2.** { *; }
-dontwarn com.google.android.exoplayer2.**


----------------------------------------
FILE: src/main/AndroidManifest.xml
----------------------------------------

<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    package="com.example.multistreamviewer">

    <!-- Permiss√µes -->
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.WAKE_LOCK" />

    <!-- Features -->
    <uses-feature android:name="android.hardware.screen.portrait" android:required="false" />
    <uses-feature android:name="android.hardware.screen.landscape" android:required="false" />

    <application
        android:allowBackup="true"
        android:icon="@mipmap/ic_launcher"
        android:label="@string/app_name"
        android:roundIcon="@mipmap/ic_launcher_round"
        android:supportsRtl="true"
        android:theme="@style/Theme.MultiStreamViewer"
        android:usesCleartextTraffic="true"
        tools:targetApi="31">

        <activity
            android:name=".MainActivity"
            android:configChanges="orientation|screenSize|keyboardHidden|screenLayout"
            android:exported="true"
            android:screenOrientation="sensorLandscape"
            android:theme="@style/Theme.MultiStreamViewer.NoActionBar.FullScreen">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

    </application>

</manifest>


----------------------------------------
FILE: src/main/assets/index.html
----------------------------------------

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="theme-color" content="#1e3c72">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Multi Stream Player</title>
    <link rel="manifest" href="data:application/manifest+json,{}">
    <style>
        * { margin:0; padding:0; box-sizing:border-box; }
        body { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            background:#0a0a0a; 
            color:#fff; 
            padding:0;
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            height: 100vh;
            overflow: hidden;
        }
        
        /* Players Container */
        .players-container { 
            flex: 1;
            display:grid; 
            gap:2px; 
            padding:2px;
            min-height: 0;
            width: 100%;
            height: 100%;
            grid-template-columns: repeat(2, 1fr);
            grid-template-rows: repeat(2, 1fr);
        }
        
        .layout-2x2 { grid-template-columns: repeat(2, 1fr); grid-template-rows: repeat(2, 1fr); }
        .layout-1x4 { grid-template-columns: repeat(4, 1fr); grid-template-rows: 1fr; }
        .layout-4x1 { grid-template-columns: 1fr; grid-template-rows: repeat(4, 1fr); }
        .layout-1x2 { grid-template-columns: repeat(2, 1fr); grid-template-rows: 1fr; }
        .layout-2x1 { grid-template-columns: 1fr; grid-template-rows: repeat(2, 1fr); }
        .layout-1x3 { grid-template-columns: repeat(3, 1fr); grid-template-rows: 1fr; }
        .layout-3x1 { grid-template-columns: 1fr; grid-template-rows: repeat(3, 1fr); }
        .layout-1x1 { grid-template-columns: 1fr; grid-template-rows: 1fr; }
        
        /* Player Slot */
        .player-slot { 
            background:#1a1a1a; 
            border-radius:2px; 
            overflow:hidden; 
            border:1px solid #333; 
            position:relative;
            display: flex;
            flex-direction: column;
            min-height: 0;
            min-width: 0;
        }
        
        .player-slot.fullscreen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: 10000;
            border-radius: 0;
            border: none;
            background: #000;
        }
        
        /* Controls Overlay */
        .player-controls-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            background: rgba(0,0,0,0.8);
            padding: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 10;
            opacity: 0;
            transition: opacity 0.3s ease;
            font-size: 12px;
        }
        
        .player-slot:hover .player-controls-overlay {
            opacity: 1;
        }
        
        .player-title { 
            font-weight:bold; 
            font-size:12px; 
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .player-buttons { 
            display:flex; 
            gap:4px; 
            align-items: center; 
            flex-wrap: nowrap;
        }
        
        .player-buttons button { 
            background:#444; 
            border:none; 
            color:white; 
            padding:6px 10px; 
            border-radius:4px; 
            cursor:pointer; 
            font-size:11px; 
            white-space: nowrap;
            min-width: 40px;
        }
        
        .player-buttons button:hover { 
            background:#555; 
        }
        
        .speed-control {
            position: relative;
            display: inline-block;
        }
        
        .speed-dropdown {
            display: none;
            position: absolute;
            top: 100%;
            right: 0;
            background: #333;
            border-radius: 4px;
            padding: 5px;
            z-index: 100;
            min-width: 80px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.5);
        }
        
        .speed-dropdown.show {
            display: block;
        }
        
        .speed-option {
            padding: 8px 12px;
            cursor: pointer;
            border-radius: 3px;
            font-size: 12px;
            text-align: center;
        }
        
        .speed-option:hover {
            background: #444;
        }
        
        .speed-option.active {
            background: #1e3c72;
            color: white;
        }
        
        /* Video Container */
        .video-container {
            flex: 1;
            position: relative;
            min-height: 0;
            background: #000;
            width: 100%;
            height: 100%;
        }
        
        .video-frame {
            width: 100%;
            height: 100%;
            border: none;
            background: #000;
        }
        
        /* Main Controls */
        .main-controls {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(26, 26, 26, 0.95);
            border: 1px solid #333;
            border-radius: 8px;
            padding: 12px;
            z-index: 1000;
            display: flex;
            gap: 10px;
            align-items: center;
            backdrop-filter: blur(10px);
            box-shadow: 0 4px 20px rgba(0,0,0,0.7);
        }
        
        .main-controls select,
        .main-controls button {
            padding: 8px 12px;
            background: #333;
            color: white;
            border: none;
            border-radius: 4px;
            font-size: 12px;
            cursor: pointer;
            min-width: 60px;
        }
        
        .main-controls button {
            background: #1e3c72;
            font-weight: bold;
        }
        
        .main-controls button:hover {
            background: #2a4a8c;
        }
        
        /* URL Input */
        .url-input-container {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(26, 26, 26, 0.95);
            border: 1px solid #333;
            border-radius: 8px;
            padding: 12px;
            z-index: 1000;
            display: flex;
            gap: 10px;
            align-items: center;
            backdrop-filter: blur(10px);
            box-shadow: 0 4px 20px rgba(0,0,0,0.7);
            min-width: 300px;
        }
        
        .url-input-container input {
            flex: 1;
            padding: 8px 12px;
            background: #222;
            color: white;
            border: 1px solid #444;
            border-radius: 4px;
            font-size: 12px;
        }
        
        .url-input-container button {
            padding: 8px 16px;
            background: #1e3c72;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
        }
        
        /* Status Message */
        .status-message {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(0,0,0,0.9);
            padding: 8px 16px;
            border-radius: 4px;
            font-size: 12px;
            z-index: 1000;
            display: none;
            max-width: 300px;
            word-wrap: break-word;
        }
        
        .status-message.show {
            display: block;
        }
        
        /* Fullscreen controls */
        .fullscreen-exit-btn {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(0,0,0,0.8);
            color: white;
            border: none;
            border-radius: 4px;
            padding: 10px 15px;
            cursor: pointer;
            z-index: 10001;
            font-size: 14px;
            display: none;
        }
        
        .player-slot.fullscreen .fullscreen-exit-btn {
            display: block;
        }
        
        /* Loading indicator */
        .loading-indicator {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-size: 14px;
            display: none;
        }
        
        .loading {
            display: block;
        }
        
        /* Box selection */
        .box-selector {
            position: fixed;
            top: 20px;
            left: 20px;
            background: rgba(26, 26, 26, 0.95);
            border: 1px solid #333;
            border-radius: 8px;
            padding: 12px;
            z-index: 1000;
            display: flex;
            gap: 10px;
            backdrop-filter: blur(10px);
        }
        
        .box-checkbox {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
        }
        
        .box-checkbox label {
            font-size: 11px;
            color: #ccc;
        }
        
        @media (max-width: 768px) {
            .players-container {
                grid-template-columns: 1fr;
                grid-template-rows: repeat(4, 1fr);
            }
            
            .main-controls {
                flex-wrap: wrap;
                justify-content: center;
                bottom: 10px;
                padding: 8px;
            }
            
            .url-input-container {
                top: 10px;
                min-width: 90vw;
            }
        }
    </style>
</head>
<body>
    <!-- Box selector -->
    <div class="box-selector">
        <div class="box-checkbox">
            <input type="checkbox" id="box1" checked>
            <label for="box1">Box 1</label>
        </div>
        <div class="box-checkbox">
            <input type="checkbox" id="box2" checked>
            <label for="box2">Box 2</label>
        </div>
        <div class="box-checkbox">
            <input type="checkbox" id="box3" checked>
            <label for="box3">Box 3</label>
        </div>
        <div class="box-checkbox">
            <input type="checkbox" id="box4" checked>
            <label for="box4">Box 4</label>
        </div>
    </div>

    <!-- URL input -->
    <div class="url-input-container">
        <select id="player-select">
            <option value="0">Player 1</option>
            <option value="1">Player 2</option>
            <option value="2">Player 3</option>
            <option value="3">Player 4</option>
        </select>
        <input type="text" id="url-input" placeholder="Enter stream URL">
        <button onclick="loadURL()">Load</button>
    </div>

    <!-- Players container -->
    <div class="players-container layout-2x2" id="players-container">
        <!-- Player slots will be generated here -->
    </div>

    <!-- Main controls -->
    <div class="main-controls">
        <select id="layout-select" onchange="changeLayout(this.value)">
            <option value="layout-2x2">2x2</option>
            <option value="layout-1x4">1x4</option>
            <option value="layout-4x1">4x1</option>
            <option value="layout-1x2">1x2</option>
            <option value="layout-2x1">2x1</option>
            <option value="layout-1x3">1x3</option>
            <option value="layout-3x1">3x1</option>
            <option value="layout-1x1">1x1</option>
        </select>
        
        <button onclick="playAll()">‚ñ∂ Play All</button>
        <button onclick="reloadAll()">‚Üª Reload All</button>
        <button onclick="clearAll()">‚úï Clear All</button>
        <button onclick="toggleFullscreen()">‚õ∂ Fullscreen</button>
    </div>

    <!-- Fullscreen exit button -->
    <button class="fullscreen-exit-btn" onclick="exitFullscreen()">Exit Fullscreen</button>

    <!-- Status message -->
    <div class="status-message" id="status-message"></div>

    <script>
        // Global state
        const state = {
            players: Array(4).fill().map((_, i) => ({
                id: i,
                iframe: null,
                currentUrl: null,
                history: [],
                historyIndex: -1,
                isFullscreen: false,
                playbackRate: 1.0,
                loading: false
            })),
            currentLayout: 'layout-2x2',
            fullscreenPlayer: null
        };

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            initializePlayers();
            setupEventListeners();
            updateBoxVisibility();
            
            // Set initial URLs for testing (optional)
            // state.players[0].currentUrl = 'https://www.youtube.com/embed/dQw4w9WgXcQ';
            // state.players[1].currentUrl = 'https://www.youtube.com/embed/dQw4w9WgXcQ';
            // loadInitialURLs();
        });

        function initializePlayers() {
            const container = document.getElementById('players-container');
            container.innerHTML = '';
            
            state.players.forEach((player, index) => {
                const slot = document.createElement('div');
                slot.className = 'player-slot';
                slot.dataset.playerId = index;
                slot.innerHTML = `
                    <div class="player-controls-overlay">
                        <div class="player-title">
                            Player ${index + 1}
                            <span id="status-${index}" style="font-size:10px;color:#aaa;"></span>
                        </div>
                        <div class="player-buttons">
                            <button onclick="navigateBack(${index})" title="Back">‚óÄ</button>
                            <button onclick="reloadPlayer(${index})" title="Reload">‚Üª</button>
                            <button onclick="navigateForward(${index})" title="Forward">‚ñ∂</button>
                            <div class="speed-control">
                                <button onclick="toggleSpeedMenu(${index})" title="Speed">${player.playbackRate}x</button>
                                <div class="speed-dropdown" id="speed-menu-${index}">
                                    <div class="speed-option ${player.playbackRate === 0.5 ? 'active' : ''}" onclick="setSpeed(${index}, 0.5)">0.5x</div>
                                    <div class="speed-option ${player.playbackRate === 0.75 ? 'active' : ''}" onclick="setSpeed(${index}, 0.75)">0.75x</div>
                                    <div class="speed-option ${player.playbackRate === 1.0 ? 'active' : ''}" onclick="setSpeed(${index}, 1.0)">1.0x</div>
                                    <div class="speed-option ${player.playbackRate === 1.25 ? 'active' : ''}" onclick="setSpeed(${index}, 1.25)">1.25x</div>
                                    <div class="speed-option ${player.playbackRate === 1.5 ? 'active' : ''}" onclick="setSpeed(${index}, 1.5)">1.5x</div>
                                    <div class="speed-option ${player.playbackRate === 2.0 ? 'active' : ''}" onclick="setSpeed(${index}, 2.0)">2.0x</div>
                                </div>
                            </div>
                            <button onclick="togglePlayerFullscreen(${index})" title="Fullscreen">‚õ∂</button>
                        </div>
                    </div>
                    <div class="video-container">
                        <div class="loading-indicator" id="loading-${index}">Loading...</div>
                        <iframe 
                            class="video-frame" 
                            id="iframe-${index}"
                            frameborder="0" 
                            allow="autoplay; encrypted-media; fullscreen"
                            allowfullscreen
                            referrerpolicy="no-referrer"
                            sandbox="allow-same-origin allow-scripts allow-popups allow-forms"
                            src="about:blank"
                        ></iframe>
                    </div>
                `;
                container.appendChild(slot);
                
                player.iframe = document.getElementById(`iframe-${index}`);
                
                // Setup iframe event listeners
                setupIframeEvents(index);
            });
        }

        function setupIframeEvents(playerIndex) {
            const iframe = state.players[playerIndex].iframe;
            if (!iframe) return;
            
            iframe.onload = function() {
                state.players[playerIndex].loading = false;
                document.getElementById(`loading-${playerIndex}`).classList.remove('loading');
                updateStatus(`Player ${playerIndex + 1} loaded`, 'success');
                
                // Inject script to control fullscreen behavior
                try {
                    const iframeDoc = iframe.contentDocument || iframe.contentWindow.document;
                    const script = iframeDoc.createElement('script');
                    script.textContent = `
                        // Override fullscreen behavior
                        document.addEventListener('fullscreenchange', function(e) {
                            if (document.fullscreenElement) {
                                // Notify parent window
                                window.parent.postMessage({type: 'fullscreenRequest', playerId: ${playerIndex}}, '*');
                            }
                        });
                        
                        // Override requestFullscreen
                        Element.prototype._requestFullscreen = Element.prototype.requestFullscreen;
                        Element.prototype.requestFullscreen = function() {
                            window.parent.postMessage({type: 'fullscreenRequest', playerId: ${playerIndex}}, '*');
                            return Promise.resolve();
                        };
                    `;
                    iframeDoc.head.appendChild(script);
                } catch (e) {
                    // Cross-origin iframe, can't inject script
                }
            };
            
            iframe.onerror = function() {
                state.players[playerIndex].loading = false;
                document.getElementById(`loading-${playerIndex}`).classList.remove('loading');
                updateStatus(`Player ${playerIndex + 1} failed to load`, 'error');
            };
        }

        function setupEventListeners() {
            // Box selection checkboxes
            document.querySelectorAll('.box-checkbox input').forEach((checkbox, index) => {
                checkbox.addEventListener('change', updateBoxVisibility);
            });
            
            // Window message listener for iframe communication
            window.addEventListener('message', function(event) {
                if (event.data.type === 'fullscreenRequest') {
                    const playerId = event.data.playerId;
                    togglePlayerFullscreen(playerId);
                }
            });
            
            // Keyboard shortcuts
            document.addEventListener('keydown', function(e) {
                // Escape exits fullscreen
                if (e.key === 'Escape' && state.fullscreenPlayer !== null) {
                    exitFullscreen();
                }
                
                // Ctrl+R reloads all
                if (e.ctrlKey && e.key === 'r') {
                    e.preventDefault();
                    reloadAll();
                }
                
                // Ctrl+F toggles fullscreen
                if (e.ctrlKey && e.key === 'f') {
                    e.preventDefault();
                    toggleFullscreen();
                }
            });
            
            // URL input enter key
            document.getElementById('url-input').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    loadURL();
                }
            });
        }

        function updateBoxVisibility() {
            const boxes = document.querySelectorAll('.player-slot');
            boxes.forEach((box, index) => {
                const checkbox = document.getElementById(`box${index + 1}`);
                if (checkbox && !checkbox.checked) {
                    box.style.display = 'none';
                    // Exit fullscreen if this box is in fullscreen
                    if (state.players[index].isFullscreen) {
                        exitPlayerFullscreen(index);
                    }
                } else {
                    box.style.display = 'flex';
                }
            });
            
            // Reapply layout
            changeLayout(state.currentLayout);
        }

        function loadURL() {
            const url = document.getElementById('url-input').value.trim();
            const playerIndex = parseInt(document.getElementById('player-select').value);
            
            if (!url) {
                updateStatus('Please enter a URL', 'error');
                return;
            }
            
            const player = state.players[playerIndex];
            
            // Add to history
            if (player.currentUrl) {
                player.history.push(player.currentUrl);
                player.historyIndex = player.history.length - 1;
            }
            
            player.currentUrl = url;
            player.loading = true;
            
            // Show loading indicator
            document.getElementById(`loading-${playerIndex}`).classList.add('loading');
            
            // Load URL with additional parameters for better compatibility
            let finalUrl = url;
            if (url.includes('youtube.com') || url.includes('youtu.be')) {
                if (!url.includes('embed')) {
                    // Convert YouTube URL to embed format
                    const videoId = extractYouTubeId(url);
                    if (videoId) {
                        finalUrl = `https://www.youtube.com/embed/${videoId}?autoplay=1&rel=0&modestbranding=1`;
                    }
                }
            } else if (url.includes('m3u8')) {
                // For HLS streams, we could use a video player
                // For now, we'll try to load in iframe
                finalUrl = `https://player.vimeo.com/video?url=${encodeURIComponent(url)}`;
            }
            
            // Add autoplay parameter if not present
            if (!finalUrl.includes('autoplay=')) {
                finalUrl += (finalUrl.includes('?') ? '&' : '?') + 'autoplay=1';
            }
            
            // Add mute parameter to avoid autoplay restrictions
            if (!finalUrl.includes('mute=')) {
                finalUrl += '&mute=1';
            }
            
            player.iframe.src = finalUrl;
            updateStatus(`Loading URL in Player ${playerIndex + 1}`, 'info');
        }

        function extractYouTubeId(url) {
            const regex = /(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/\s]{11})/;
            const match = url.match(regex);
            return match ? match[1] : null;
        }

        function reloadPlayer(playerIndex) {
            const player = state.players[playerIndex];
            if (player.iframe && player.iframe.src && player.iframe.src !== 'about:blank') {
                player.loading = true;
                document.getElementById(`loading-${playerIndex}`).classList.add('loading');
                player.iframe.src = player.iframe.src + '&t=' + Date.now();
                updateStatus(`Reloading Player ${playerIndex + 1}`, 'info');
            }
        }

        function navigateBack(playerIndex) {
            const player = state.players[playerIndex];
            if (player.historyIndex > 0) {
                player.historyIndex--;
                const url = player.history[player.historyIndex];
                player.currentUrl = url;
                player.iframe.src = url;
                updateStatus(`Going back in Player ${playerIndex + 1}`, 'info');
            }
        }

        function navigateForward(playerIndex) {
            const player = state.players[playerIndex];
            if (player.historyIndex < player.history.length - 1) {
                player.historyIndex++;
                const url = player.history[player.historyIndex];
                player.currentUrl = url;
                player.iframe.src = url;
                updateStatus(`Going forward in Player ${playerIndex + 1}`, 'info');
            }
        }

        function toggleSpeedMenu(playerIndex) {
            const menu = document.getElementById(`speed-menu-${playerIndex}`);
            menu.classList.toggle('show');
            
            // Close other speed menus
            document.querySelectorAll('.speed-dropdown').forEach(m => {
                if (m.id !== `speed-menu-${playerIndex}`) {
                    m.classList.remove('show');
                }
            });
        }

        function setSpeed(playerIndex, speed) {
            const player = state.players[playerIndex];
            player.playbackRate = speed;
            
            // Update button text
            const button = document.querySelector(`#speed-menu-${playerIndex}`).previousElementSibling;
            button.textContent = `${speed}x`;
            
            // Update active class
            document.querySelectorAll(`#speed-menu-${playerIndex} .speed-option`).forEach(opt => {
                opt.classList.remove('active');
                if (parseFloat(opt.textContent) === speed) {
                    opt.classList.add('active');
                }
            });
            
            // Close menu
            document.getElementById(`speed-menu-${playerIndex}`).classList.remove('show');
            
            // Try to set playback rate on iframe
            try {
                const iframe = player.iframe;
                const iframeDoc = iframe.contentDocument || iframe.contentWindow.document;
                const videos = iframeDoc.querySelectorAll('video');
                videos.forEach(video => {
                    video.playbackRate = speed;
                });
            } catch (e) {
                // Cross-origin restriction
            }
            
            updateStatus(`Player ${playerIndex + 1} speed: ${speed}x`, 'success');
        }

        function togglePlayerFullscreen(playerIndex) {
            const player = state.players[playerIndex];
            const slot = document.querySelector(`.player-slot[data-player-id="${playerIndex}"]`);
            
            if (player.isFullscreen) {
                exitPlayerFullscreen(playerIndex);
            } else {
                // Exit any other fullscreen player
                if (state.fullscreenPlayer !== null) {
                    exitPlayerFullscreen(state.fullscreenPlayer);
                }
                
                enterPlayerFullscreen(playerIndex, slot);
            }
        }

        function enterPlayerFullscreen(playerIndex, slot) {
            const player = state.players[playerIndex];
            player.isFullscreen = true;
            state.fullscreenPlayer = playerIndex;
            slot.classList.add('fullscreen');
            
            // Hide other controls
            document.querySelectorAll('.main-controls, .url-input-container, .box-selector').forEach(el => {
                el.style.display = 'none';
            });
            
            updateStatus(`Player ${playerIndex + 1} fullscreen`, 'info');
        }

        function exitPlayerFullscreen(playerIndex) {
            const player = state.players[playerIndex];
            const slot = document.querySelector(`.player-slot[data-player-id="${playerIndex}"]`);
            
            player.isFullscreen = false;
            state.fullscreenPlayer = null;
            slot.classList.remove('fullscreen');
            
            // Show controls
            document.querySelectorAll('.main-controls, .url-input-container, .box-selector').forEach(el => {
                el.style.display = 'flex';
            });
            
            updateStatus(`Exited fullscreen`, 'info');
        }

        function exitFullscreen() {
            if (state.fullscreenPlayer !== null) {
                exitPlayerFullscreen(state.fullscreenPlayer);
            }
        }

        function toggleFullscreen() {
            if (state.fullscreenPlayer !== null) {
                exitFullscreen();
            } else {
                // Enter app fullscreen
                if (!document.fullscreenElement) {
                    document.documentElement.requestFullscreen();
                }
            }
        }

        function changeLayout(layout) {
            const container = document.getElementById('players-container');
            container.className = 'players-container ' + layout;
            state.currentLayout = layout;
            updateStatus(`Layout changed to ${layout.replace('layout-', '')}`, 'success');
        }

        function playAll() {
            state.players.forEach((player, index) => {
                if (player.iframe && player.iframe.src && player.iframe.src !== 'about:blank') {
                    try {
                        const iframe = player.iframe;
                        const iframeDoc = iframe.contentDocument || iframe.contentWindow.document;
                        const videos = iframeDoc.querySelectorAll('video');
                        videos.forEach(video => {
                            video.play().catch(e => console.log('Autoplay prevented'));
                        });
                    } catch (e) {
                        // Cross-origin restriction
                    }
                }
            });
            updateStatus('Playing all streams', 'success');
        }

        function reloadAll() {
            state.players.forEach((player, index) => {
                if (player.iframe && player.iframe.src && player.iframe.src !== 'about:blank') {
                    reloadPlayer(index);
                }
            });
        }

        function clearAll() {
            state.players.forEach((player, index) => {
                player.iframe.src = 'about:blank';
                player.currentUrl = null;
                player.history = [];
                player.historyIndex = -1;
                document.getElementById(`loading-${index}`).classList.remove('loading');
            });
            updateStatus('All players cleared', 'success');
        }

        function updateStatus(message, type = 'info') {
            const statusEl = document.getElementById('status-message');
            statusEl.textContent = message;
            statusEl.className = `status-message show ${type}`;
            
            setTimeout(() => {
                statusEl.classList.remove('show');
            }, 3000);
        }

        function loadInitialURLs() {
            state.players.forEach((player, index) => {
                if (player.currentUrl) {
                    player.loading = true;
                    document.getElementById(`loading-${index}`).classList.add('loading');
                    player.iframe.src = player.currentUrl + (player.currentUrl.includes('?') ? '&' : '?') + 'autoplay=1&mute=1';
                }
            });
        }

        // Make functions available globally
        window.loadURL = loadURL;
        window.reloadPlayer = reloadPlayer;
        window.navigateBack = navigateBack;
        window.navigateForward = navigateForward;
        window.toggleSpeedMenu = toggleSpeedMenu;
        window.setSpeed = setSpeed;
        window.togglePlayerFullscreen = togglePlayerFullscreen;
        window.exitFullscreen = exitFullscreen;
        window.toggleFullscreen = toggleFullscreen;
        window.changeLayout = changeLayout;
        window.playAll = playAll;
        window.reloadAll = reloadAll;
        window.clearAll = clearAll;
    </script>
</body>
</html>

----------------------------------------
FILE: src/main/java/com/dirosky/multibrowserbox/box/BrowserBox.kt
----------------------------------------

package com.dirosky.multibrowserbox.box

data class BrowserBox(
    val id: Int,
    var url: String
)


----------------------------------------
FILE: src/main/java/com/example/multistreamviewer/MainActivity.java
----------------------------------------

package com.example.multistreamviewer;

import android.annotation.SuppressLint;
import android.content.res.Configuration;
import android.os.Bundle;
import android.os.Handler;
import android.view.View;
import android.webkit.WebChromeClient;
import android.webkit.WebSettings;
import android.webkit.WebView;
import android.webkit.WebViewClient;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.CheckBox;
import android.widget.CompoundButton;
import android.widget.EditText;
import android.widget.FrameLayout;
import android.widget.LinearLayout;
import android.widget.Spinner;
import android.widget.Toast;

import androidx.appcompat.app.AppCompatActivity;
import androidx.gridlayout.widget.GridLayout;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

public class MainActivity extends AppCompatActivity {

    // Componentes
    private GridLayout gridLayout;
    private WebView[] webViews = new WebView[4];
    private FrameLayout[] playerContainers = new FrameLayout[4];
    private LinearLayout[] loadingOverlays = new LinearLayout[4];
    private LinearLayout[] controlPanels = new LinearLayout[4]; // Pain√©is de controle de cada box
    private EditText[] urlInputs = new EditText[4];
    private CheckBox[] checkBoxes = new CheckBox[4];
    
    // Bot√µes de controle por box
    private Button[] btnZoomIn = new Button[4];
    private Button[] btnZoomOut = new Button[4];
    private Button[] btnRefresh = new Button[4];
    private Button[] btnBack = new Button[4];
    private Button[] btnForward = new Button[4];
    private Button[] btnFullscreen = new Button[4];
    
    // Menu e controles gerais
    private LinearLayout sideMenu;
    private LinearLayout bottomPanel; // Painel inferior foldable
    private Button btnToggleMenu, btnToggleOrientation, btnCloseMenu;
    private Button btnToggleBottomPanel; // Bot√£o para mostrar/esconder painel inferior
    private Spinner layoutSpinner;
    private Button btnLoadAll, btnReloadAll, btnClearAll;
    private CheckBox cbAllowScripts, cbAllowForms, cbAllowPopups;
    private CheckBox cbBlockRedirects; // Novo: bloquear redirecionamentos
    
    // Estado
    private boolean isMenuVisible = false;
    private boolean isBottomPanelVisible = false;
    private int currentOrientation = Configuration.ORIENTATION_LANDSCAPE;
    private int activePlayersCount = 4;
    private boolean[] playerFullscreen = new boolean[4];
    private View fullscreenView = null;
    private int fullscreenPlayerIndex = -1;
    private boolean[] controlPanelVisible = new boolean[4];
    private Handler[] controlPanelHandlers = new Handler[4];
    private Runnable[] hideControlPanelRunnables = new Runnable[4];
    
    // Configura√ß√µes WebView
    private boolean allowScripts = true;
    private boolean allowForms = true;
    private boolean allowPopups = true;
    private boolean blockRedirects = false; // Novo: bloquear redirecionamentos
    
    // Hist√≥rico de navega√ß√£o por player
    private Map<Integer, List<String>> historyMap = new HashMap<>();
    private Map<Integer, Integer> historyIndexMap = new HashMap<>();

    @SuppressLint("SetJavaScriptEnabled")
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        // Inicializar orienta√ß√£o
        setRequestedOrientation(android.content.pm.ActivityInfo.SCREEN_ORIENTATION_SENSOR_LANDSCAPE);
        
        // Inicializar arrays de IDs
        int[] webViewIds = {R.id.webView1, R.id.webView2, R.id.webView3, R.id.webView4};
        int[] containerIds = {R.id.playerContainer1, R.id.playerContainer2, R.id.playerContainer3, R.id.playerContainer4};
        int[] overlayIds = {R.id.loadingOverlay1, R.id.loadingOverlay2, R.id.loadingOverlay3, R.id.loadingOverlay4};
        int[] controlPanelIds = {R.id.controlPanel1, R.id.controlPanel2, R.id.controlPanel3, R.id.controlPanel4};
        int[] inputIds = {R.id.urlInput1, R.id.urlInput2, R.id.urlInput3, R.id.urlInput4};
        int[] checkboxIds = {R.id.checkBox1, R.id.checkBox2, R.id.checkBox3, R.id.checkBox4};
        int[] zoomInIds = {R.id.btnZoomIn1, R.id.btnZoomIn2, R.id.btnZoomIn3, R.id.btnZoomIn4};
        int[] zoomOutIds = {R.id.btnZoomOut1, R.id.btnZoomOut2, R.id.btnZoomOut3, R.id.btnZoomOut4};
        int[] refreshIds = {R.id.btnRefresh1, R.id.btnRefresh2, R.id.btnRefresh3, R.id.btnRefresh4};
        int[] backIds = {R.id.btnBack1, R.id.btnBack2, R.id.btnBack3, R.id.btnBack4};
        int[] forwardIds = {R.id.btnForward1, R.id.btnForward2, R.id.btnForward3, R.id.btnForward4};
        int[] fullscreenIds = {R.id.btnFullscreen1, R.id.btnFullscreen2, R.id.btnFullscreen3, R.id.btnFullscreen4};
        
        // Obter refer√™ncias
        gridLayout = findViewById(R.id.gridLayout);
        sideMenu = findViewById(R.id.sideMenu);
        bottomPanel = findViewById(R.id.bottomPanel);
        btnToggleMenu = findViewById(R.id.btnToggleMenu);
        btnToggleOrientation = findViewById(R.id.btnToggleOrientation);
        btnCloseMenu = findViewById(R.id.btnCloseMenu);
        btnToggleBottomPanel = findViewById(R.id.btnToggleBottomPanel);
        layoutSpinner = findViewById(R.id.layoutSpinner);
        btnLoadAll = findViewById(R.id.btnLoadAll);
        btnReloadAll = findViewById(R.id.btnReloadAll);
        btnClearAll = findViewById(R.id.btnClearAll);
        cbAllowScripts = findViewById(R.id.cbAllowScripts);
        cbAllowForms = findViewById(R.id.cbAllowForms);
        cbAllowPopups = findViewById(R.id.cbAllowPopups);
        cbBlockRedirects = findViewById(R.id.cbBlockRedirects);
        
        // Configurar checkboxes de permiss√µes
        cbAllowScripts.setChecked(allowScripts);
        cbAllowForms.setChecked(allowForms);
        cbAllowPopups.setChecked(allowPopups);
        cbBlockRedirects.setChecked(blockRedirects);
        
        cbAllowScripts.setOnCheckedChangeListener((buttonView, isChecked) -> {
            allowScripts = isChecked;
            applyWebViewSettings();
        });
        
        cbAllowForms.setOnCheckedChangeListener((buttonView, isChecked) -> {
            allowForms = isChecked;
            applyWebViewSettings();
        });
        
        cbAllowPopups.setOnCheckedChangeListener((buttonView, isChecked) -> {
            allowPopups = isChecked;
            applyWebViewSettings();
        });
        
        cbBlockRedirects.setOnCheckedChangeListener((buttonView, isChecked) -> {
            blockRedirects = isChecked;
        });
        
        // Inicializar WebViews e controles
        for (int i = 0; i < 4; i++) {
            final int playerIndex = i;
            
            // Inicializar hist√≥rico
            historyMap.put(i, new ArrayList<>());
            historyIndexMap.put(i, -1);
            
            // Handlers para ocultar controles
            controlPanelHandlers[i] = new Handler();
            
            // WebViews
            webViews[i] = findViewById(webViewIds[i]);
            setupWebView(webViews[i], playerIndex);
            
            // Containers
            playerContainers[i] = findViewById(containerIds[i]);
            
            // Overlays
            loadingOverlays[i] = findViewById(overlayIds[i]);
            
            // Pain√©is de controle
            controlPanels[i] = findViewById(controlPanelIds[i]);
            controlPanels[i].setVisibility(View.GONE);
            controlPanelVisible[i] = false;
            
            // Inputs
            urlInputs[i] = findViewById(inputIds[i]);
            urlInputs[i].setOnEditorActionListener((v, actionId, event) -> {
                loadURL(playerIndex, urlInputs[playerIndex].getText().toString().trim());
                return true;
            });
            
            // CheckBoxes
            checkBoxes[i] = findViewById(checkboxIds[i]);
            checkBoxes[i].setChecked(true);
            checkBoxes[i].setOnCheckedChangeListener((buttonView, isChecked) -> {
                updateActivePlayers();
                applyAutoLayout();
            });
            
            // Bot√µes de controle
            btnZoomIn[i] = findViewById(zoomInIds[i]);
            btnZoomOut[i] = findViewById(zoomOutIds[i]);
            btnRefresh[i] = findViewById(refreshIds[i]);
            btnBack[i] = findViewById(backIds[i]);
            btnForward[i] = findViewById(forwardIds[i]);
            btnFullscreen[i] = findViewById(fullscreenIds[i]);
            
            // Configurar listeners
            btnZoomIn[i].setOnClickListener(v -> {
                zoomWebView(playerIndex, 1.2f);
                resetControlPanelTimer(playerIndex);
            });
            
            btnZoomOut[i].setOnClickListener(v -> {
                zoomWebView(playerIndex, 0.8f);
                resetControlPanelTimer(playerIndex);
            });
            
            btnRefresh[i].setOnClickListener(v -> {
                refreshWebView(playerIndex);
                resetControlPanelTimer(playerIndex);
            });
            
            btnBack[i].setOnClickListener(v -> {
                goBack(playerIndex);
                resetControlPanelTimer(playerIndex);
            });
            
            btnForward[i].setOnClickListener(v -> {
                goForward(playerIndex);
                resetControlPanelTimer(playerIndex);
            });
            
            btnFullscreen[i].setOnClickListener(v -> {
                togglePlayerFullscreen(playerIndex);
                resetControlPanelTimer(playerIndex);
            });
            
            // Tocar no container para mostrar controles
            playerContainers[i].setOnClickListener(v -> {
                toggleControlPanel(playerIndex);
            });
            
            // CORRE√á√ÉO: Criar vari√°vel final para usar na lambda
            final int finalPlayerIndex = i;
            
            // Criar runnable para esconder controles
            hideControlPanelRunnables[i] = new Runnable() {
                @Override
                public void run() {
                    if (controlPanelVisible[finalPlayerIndex] && !playerFullscreen[finalPlayerIndex]) {
                        controlPanels[finalPlayerIndex].setVisibility(View.GONE);
                        controlPanelVisible[finalPlayerIndex] = false;
                    }
                }
            };
        }
        
        // Configurar Spinner de layouts
        updateLayoutSpinner();
        layoutSpinner.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
            @Override
            public void onItemSelected(AdapterView<?> parent, View view, int position, long id) {
                String layout = parent.getItemAtPosition(position).toString();
                applyLayout(layout);
            }
            
            @Override
            public void onNothingSelected(AdapterView<?> parent) {
            }
        });
        
        // Configurar bot√µes do menu
        btnToggleMenu.setOnClickListener(v -> toggleMenu());
        btnToggleOrientation.setOnClickListener(v -> toggleOrientation());
        btnCloseMenu.setOnClickListener(v -> toggleMenu());
        btnToggleBottomPanel.setOnClickListener(v -> toggleBottomPanel());
        
        btnLoadAll.setOnClickListener(v -> loadAllURLs());
        btnReloadAll.setOnClickListener(v -> reloadAllWebViews());
        btnClearAll.setOnClickListener(v -> clearAllWebViews());
        
        // Configurar orienta√ß√£o inicial
        currentOrientation = getResources().getConfiguration().orientation;
        updateOrientationUI();
        
        // Aplicar layout inicial
        updateActivePlayers();
        applyAutoLayout();
        
        // Esconder menu e painel inferior inicialmente
        sideMenu.setVisibility(View.GONE);
        bottomPanel.setVisibility(View.GONE);
    }
    
    @SuppressLint("SetJavaScriptEnabled")
    private void setupWebView(WebView webView, int playerIndex) {
        WebSettings webSettings = webView.getSettings();
        
        // Configura√ß√µes b√°sicas
        webSettings.setJavaScriptEnabled(true);
        webSettings.setDomStorageEnabled(true);
        webSettings.setDatabaseEnabled(true);
        webSettings.setAllowFileAccess(true);
        webSettings.setAllowContentAccess(true);
        webSettings.setAllowFileAccessFromFileURLs(true);
        webSettings.setAllowUniversalAccessFromFileURLs(true);
        webSettings.setMediaPlaybackRequiresUserGesture(false);
        webSettings.setLoadsImagesAutomatically(true);
        
        // Configura√ß√µes de zoom
        webSettings.setBuiltInZoomControls(false);
        webSettings.setDisplayZoomControls(false);
        webSettings.setSupportZoom(true);
        webSettings.setUseWideViewPort(true);
        webSettings.setLoadWithOverviewMode(true);
        
        // User agent para v√≠deos
        webSettings.setUserAgentString("Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36");
        
        // Habilitar hardware acceleration
        webView.setLayerType(View.LAYER_TYPE_HARDWARE, null);
        
        // Configurar WebViewClient personalizado para controlar redirecionamentos
        webView.setWebViewClient(new WebViewClient() {
            @Override
            public void onPageStarted(WebView view, String url, android.graphics.Bitmap favicon) {
                loadingOverlays[playerIndex].setVisibility(View.VISIBLE);
                urlInputs[playerIndex].setText(url);
                
                // Adicionar ao hist√≥rico
                List<String> history = historyMap.get(playerIndex);
                if (history.isEmpty() || !history.get(history.size() - 1).equals(url)) {
                    history.add(url);
                    historyIndexMap.put(playerIndex, history.size() - 1);
                    updateNavigationButtons(playerIndex);
                }
            }
            
            @Override
            public void onPageFinished(WebView view, String url) {
                loadingOverlays[playerIndex].setVisibility(View.GONE);
                updateNavigationButtons(playerIndex);
            }
            
            @Override
            public void onReceivedError(WebView view, int errorCode, String description, String failingUrl) {
                loadingOverlays[playerIndex].setVisibility(View.VISIBLE);
                Toast.makeText(MainActivity.this, 
                    "Player " + (playerIndex + 1) + " error: " + description, 
                    Toast.LENGTH_SHORT).show();
            }
            
            @Override
            public boolean shouldOverrideUrlLoading(WebView view, String url) {
                // Bloquear redirecionamentos se a op√ß√£o estiver ativada
                if (blockRedirects) {
                    // Permite apenas carregar a URL se for do mesmo dom√≠nio ou se for uma a√ß√£o do usu√°rio
                    String currentUrl = view.getUrl();
                    if (currentUrl != null && !isSameDomain(currentUrl, url)) {
                        Toast.makeText(MainActivity.this, 
                            "Redirect blocked for Player " + (playerIndex + 1), 
                            Toast.LENGTH_SHORT).show();
                        return true; // Bloqueia o redirecionamento
                    }
                }
                return false; // Permite o redirecionamento
            }
        });
        
        // Configurar WebChromeClient para v√≠deos fullscreen
        webView.setWebChromeClient(new WebChromeClient() {
            private View customView;
            private WebChromeClient.CustomViewCallback customViewCallback;
            
            @Override
            public void onShowCustomView(View view, WebChromeClient.CustomViewCallback callback) {
                if (customView != null) {
                    callback.onCustomViewHidden();
                    return;
                }
                
                customView = view;
                customViewCallback = callback;
                
                // Adicionar a view personalizada ao container
                playerContainers[playerIndex].addView(customView, 
                    new FrameLayout.LayoutParams(
                        FrameLayout.LayoutParams.MATCH_PARENT,
                        FrameLayout.LayoutParams.MATCH_PARENT));
                
                // Esconder WebView
                webViews[playerIndex].setVisibility(View.GONE);
                
                // Ativar fullscreen
                playerFullscreen[playerIndex] = true;
                fullscreenView = view;
                fullscreenPlayerIndex = playerIndex;
                
                // Esconder todos os controles
                hideAllControlPanels();
            }
            
            @Override
            public void onHideCustomView() {
                if (customView == null) return;
                
                // Mostrar WebView novamente
                webViews[playerIndex].setVisibility(View.VISIBLE);
                
                // Remover view personalizada
                playerContainers[playerIndex].removeView(customView);
                
                // Notificar callback
                if (customViewCallback != null) {
                    customViewCallback.onCustomViewHidden();
                }
                
                customView = null;
                customViewCallback = null;
                playerFullscreen[playerIndex] = false;
                fullscreenView = null;
                fullscreenPlayerIndex = -1;
            }
        });
    }
    
    private boolean isSameDomain(String url1, String url2) {
        try {
            java.net.URL u1 = new java.net.URL(url1);
            java.net.URL u2 = new java.net.URL(url2);
            return u1.getHost().equals(u2.getHost());
        } catch (Exception e) {
            return false;
        }
    }
    
    private void applyWebViewSettings() {
        for (WebView webView : webViews) {
            if (webView != null) {
                WebSettings webSettings = webView.getSettings();
                webSettings.setJavaScriptEnabled(allowScripts);
                // As outras configura√ß√µes s√£o mantidas
            }
        }
    }
    
    private void loadURL(int playerIndex, String url) {
        if (url.isEmpty()) {
            Toast.makeText(this, "Enter URL", Toast.LENGTH_SHORT).show();
            return;
        }
        
        if (!url.startsWith("http://") && !url.startsWith("https://")) {
            url = "https://" + url;
        }
        
        webViews[playerIndex].loadUrl(url);
        urlInputs[playerIndex].setText(url);
    }
    
    private void loadAllURLs() {
        for (int i = 0; i < 4; i++) {
            if (checkBoxes[i].isChecked()) {
                String url = urlInputs[i].getText().toString().trim();
                if (!url.isEmpty()) {
                    loadURL(i, url);
                }
            }
        }
        Toast.makeText(this, "Loading all", Toast.LENGTH_SHORT).show();
    }
    
    private void reloadAllWebViews() {
        for (int i = 0; i < 4; i++) {
            if (checkBoxes[i].isChecked() && webViews[i] != null) {
                webViews[i].reload();
            }
        }
        Toast.makeText(this, "Reloading all", Toast.LENGTH_SHORT).show();
    }
    
    private void refreshWebView(int playerIndex) {
        if (webViews[playerIndex] != null) {
            webViews[playerIndex].reload();
        }
    }
    
    private void goBack(int playerIndex) {
        if (webViews[playerIndex].canGoBack()) {
            webViews[playerIndex].goBack();
        } else {
            List<String> history = historyMap.get(playerIndex);
            int currentIndex = historyIndexMap.get(playerIndex);
            if (currentIndex > 0) {
                String url = history.get(currentIndex - 1);
                webViews[playerIndex].loadUrl(url);
                historyIndexMap.put(playerIndex, currentIndex - 1);
            }
        }
    }
    
    private void goForward(int playerIndex) {
        if (webViews[playerIndex].canGoForward()) {
            webViews[playerIndex].goForward();
        } else {
            List<String> history = historyMap.get(playerIndex);
            int currentIndex = historyIndexMap.get(playerIndex);
            if (currentIndex < history.size() - 1) {
                String url = history.get(currentIndex + 1);
                webViews[playerIndex].loadUrl(url);
                historyIndexMap.put(playerIndex, currentIndex + 1);
            }
        }
    }
    
    private void updateNavigationButtons(int playerIndex) {
        boolean canGoBack = webViews[playerIndex].canGoBack();
        boolean canGoForward = webViews[playerIndex].canGoForward();
        
        btnBack[playerIndex].setAlpha(canGoBack ? 1.0f : 0.5f);
        btnForward[playerIndex].setAlpha(canGoForward ? 1.0f : 0.5f);
    }
    
    private void clearAllWebViews() {
        for (int i = 0; i < 4; i++) {
            if (webViews[i] != null) {
                webViews[i].loadUrl("about:blank");
                urlInputs[i].setText("");
                historyMap.get(i).clear();
                historyIndexMap.put(i, -1);
                updateNavigationButtons(i);
            }
        }
        Toast.makeText(this, "Cleared all", Toast.LENGTH_SHORT).show();
    }
    
    private void zoomWebView(int playerIndex, float factor) {
        WebView webView = webViews[playerIndex];
        if (webView != null) {
            WebSettings settings = webView.getSettings();
            int currentZoom = settings.getTextZoom();
            int newZoom = (int)(currentZoom * factor);
            if (newZoom > 30 && newZoom < 500) { // Limites razo√°veis
                settings.setTextZoom(newZoom);
                Toast.makeText(this, "Zoom: " + newZoom + "%", Toast.LENGTH_SHORT).show();
            }
        }
    }
    
    private void togglePlayerFullscreen(int playerIndex) {
        if (playerFullscreen[playerIndex]) {
            // Sair do fullscreen
            WebChromeClient chromeClient = (WebChromeClient) webViews[playerIndex].getWebChromeClient();
            if (chromeClient != null) {
                chromeClient.onHideCustomView();
            }
        } else {
            // Entrar no fullscreen - para p√°ginas normais
            playerContainers[playerIndex].setSystemUiVisibility(
                View.SYSTEM_UI_FLAG_FULLSCREEN |
                View.SYSTEM_UI_FLAG_HIDE_NAVIGATION |
                View.SYSTEM_UI_FLAG_IMMERSIVE_STICKY
            );
            playerFullscreen[playerIndex] = true;
            fullscreenPlayerIndex = playerIndex;
            hideAllControlPanels();
        }
    }
    
    private void toggleControlPanel(int playerIndex) {
        if (playerFullscreen[playerIndex]) return;
        
        if (controlPanelVisible[playerIndex]) {
            controlPanels[playerIndex].setVisibility(View.GONE);
            controlPanelVisible[playerIndex] = false;
            controlPanelHandlers[playerIndex].removeCallbacks(hideControlPanelRunnables[playerIndex]);
        } else {
            // Esconder outros pain√©is
            hideAllControlPanels();
            
            // Mostrar este painel
            controlPanels[playerIndex].setVisibility(View.VISIBLE);
            controlPanelVisible[playerIndex] = true;
            
            // Atualizar bot√µes de navega√ß√£o
            updateNavigationButtons(playerIndex);
            
            // Configurar timer para esconder
            resetControlPanelTimer(playerIndex);
        }
    }
    
    private void resetControlPanelTimer(int playerIndex) {
        controlPanelHandlers[playerIndex].removeCallbacks(hideControlPanelRunnables[playerIndex]);
        controlPanelHandlers[playerIndex].postDelayed(hideControlPanelRunnables[playerIndex], 10000); // 10 segundos
    }
    
    private void hideAllControlPanels() {
        for (int i = 0; i < 4; i++) {
            controlPanels[i].setVisibility(View.GONE);
            controlPanelVisible[i] = false;
            controlPanelHandlers[i].removeCallbacks(hideControlPanelRunnables[i]);
        }
    }
    
    private void updateActivePlayers() {
        activePlayersCount = 0;
        for (int i = 0; i < 4; i++) {
            if (checkBoxes[i].isChecked()) {
                activePlayersCount++;
                playerContainers[i].setVisibility(View.VISIBLE);
            } else {
                playerContainers[i].setVisibility(View.GONE);
                // Sair do fullscreen se estiver
                if (playerFullscreen[i]) {
                    togglePlayerFullscreen(i);
                }
                // Esconder painel de controle
                controlPanels[i].setVisibility(View.GONE);
                controlPanelVisible[i] = false;
                controlPanelHandlers[i].removeCallbacks(hideControlPanelRunnables[i]);
            }
        }
        
        // Atualizar spinner de layouts
        updateLayoutSpinner();
    }
    
    private void updateLayoutSpinner() {
        // Layouts dispon√≠veis baseados no n√∫mero de players ativos e orienta√ß√£o
        List<String> availableLayouts = new ArrayList<>();
        
        if (activePlayersCount == 1) {
            availableLayouts.add("1x1");
        } else if (activePlayersCount == 2) {
            if (currentOrientation == Configuration.ORIENTATION_LANDSCAPE) {
                availableLayouts.add("1x2");
                availableLayouts.add("2x1");
            } else {
                availableLayouts.add("2x1");
                availableLayouts.add("1x2");
            }
        } else if (activePlayersCount == 3) {
            if (currentOrientation == Configuration.ORIENTATION_LANDSCAPE) {
                availableLayouts.add("1x3");
                availableLayouts.add("3x1");
            } else {
                availableLayouts.add("3x1");
                availableLayouts.add("1x3");
            }
        } else if (activePlayersCount == 4) {
            availableLayouts.add("2x2");
            if (currentOrientation == Configuration.ORIENTATION_LANDSCAPE) {
                availableLayouts.add("1x4");
                availableLayouts.add("4x1");
            } else {
                availableLayouts.add("4x1");
                availableLayouts.add("1x4");
            }
        }
        
        // Configurar adapter
        ArrayAdapter<String> adapter = new ArrayAdapter<>(this, 
            android.R.layout.simple_spinner_item, availableLayouts);
        adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        layoutSpinner.setAdapter(adapter);
        
        // Selecionar layout padr√£o
        if (!availableLayouts.isEmpty()) {
            layoutSpinner.setSelection(0);
            applyLayout(availableLayouts.get(0));
        }
    }
    
    private void applyAutoLayout() {
        updateLayoutSpinner();
    }
    
    private void applyLayout(String layout) {
        // Parse layout string (e.g., "2x2")
        String[] parts = layout.split("x");
        if (parts.length != 2) return;
        
        try {
            int rows = Integer.parseInt(parts[0]);
            int cols = Integer.parseInt(parts[1]);
            
            // Configurar grid
            gridLayout.setRowCount(rows);
            gridLayout.setColumnCount(cols);
            
            // Remover todas as views do grid
            gridLayout.removeAllViews();
            
            // Adicionar apenas os containers ativos na ordem correta
            int playerCount = 0;
            for (int i = 0; i < 4; i++) {
                if (checkBoxes[i].isChecked()) {
                    GridLayout.Spec rowSpec = GridLayout.spec(playerCount / cols, 1f);
                    GridLayout.Spec colSpec = GridLayout.spec(playerCount % cols, 1f);
                    
                    GridLayout.LayoutParams params = new GridLayout.LayoutParams(rowSpec, colSpec);
                    params.width = 0;
                    params.height = 0;
                    params.setMargins(2, 2, 2, 2);
                    
                    // Adicionar ao grid
                    gridLayout.addView(playerContainers[i], params);
                    playerCount++;
                    
                    if (playerCount >= rows * cols) break;
                }
            }
            
            // For√ßar redesenho
            gridLayout.requestLayout();
            gridLayout.invalidate();
            
        } catch (NumberFormatException e) {
            e.printStackTrace();
        }
    }
    
    private void toggleMenu() {
        isMenuVisible = !isMenuVisible;
        
        if (isMenuVisible) {
            sideMenu.setVisibility(View.VISIBLE);
            sideMenu.animate().translationX(0).setDuration(200).start();
            btnToggleMenu.setText("‚úï");
        } else {
            sideMenu.animate().translationX(-sideMenu.getWidth()).setDuration(200)
                .withEndAction(() -> {
                    sideMenu.setVisibility(View.GONE);
                    btnToggleMenu.setText("‚ò∞");
                }).start();
        }
    }
    
    private void toggleBottomPanel() {
        isBottomPanelVisible = !isBottomPanelVisible;
        
        if (isBottomPanelVisible) {
            bottomPanel.setVisibility(View.VISIBLE);
            bottomPanel.animate().translationY(0).setDuration(200).start();
            btnToggleBottomPanel.setText("‚ñº");
        } else {
            bottomPanel.animate().translationY(bottomPanel.getHeight()).setDuration(200)
                .withEndAction(() -> {
                    bottomPanel.setVisibility(View.GONE);
                    btnToggleBottomPanel.setText("‚ñ≤");
                }).start();
        }
    }
    
    private void toggleOrientation() {
        if (currentOrientation == Configuration.ORIENTATION_LANDSCAPE) {
            setRequestedOrientation(android.content.pm.ActivityInfo.SCREEN_ORIENTATION_SENSOR_PORTRAIT);
        } else {
            setRequestedOrientation(android.content.pm.ActivityInfo.SCREEN_ORIENTATION_SENSOR_LANDSCAPE);
        }
    }
    
    private void updateOrientationUI() {
        if (currentOrientation == Configuration.ORIENTATION_LANDSCAPE) {
            btnToggleOrientation.setText("üì± Portrait");
        } else {
            btnToggleOrientation.setText("üì± Landscape");
        }
        
        // Reaplicar layout para nova orienta√ß√£o
        updateLayoutSpinner();
    }
    
    @Override
    public void onConfigurationChanged(Configuration newConfig) {
        super.onConfigurationChanged(newConfig);
        currentOrientation = newConfig.orientation;
        updateOrientationUI();
    }
    
    @Override
    public void onBackPressed() {
        // Se estiver em fullscreen, sair primeiro
        if (fullscreenPlayerIndex != -1 && playerFullscreen[fullscreenPlayerIndex]) {
            togglePlayerFullscreen(fullscreenPlayerIndex);
            return;
        }
        
        // Se menu estiver vis√≠vel, fechar
        if (isMenuVisible) {
            toggleMenu();
            return;
        }
        
        // Se painel inferior estiver vis√≠vel, fechar
        if (isBottomPanelVisible) {
            toggleBottomPanel();
            return;
        }
        
        // Verificar se algum WebView pode voltar
        for (WebView webView : webViews) {
            if (webView.canGoBack()) {
                webView.goBack();
                return;
            }
        }
        
        super.onBackPressed();
    }
    
    @Override
    protected void onResume() {
        super.onResume();
        for (WebView webView : webViews) {
            if (webView != null) {
                webView.onResume();
            }
        }
    }
    
    @Override
    protected void onPause() {
        super.onPause();
        for (WebView webView : webViews) {
            if (webView != null) {
                webView.onPause();
            }
        }
        // Remover todos os handlers
        for (Handler handler : controlPanelHandlers) {
            if (handler != null) {
                handler.removeCallbacksAndMessages(null);
            }
        }
    }
    
    @Override
    protected void onDestroy() {
        for (WebView webView : webViews) {
            if (webView != null) {
                webView.destroy();
            }
        }
        // Remover todos os handlers
        for (Handler handler : controlPanelHandlers) {
            if (handler != null) {
                handler.removeCallbacksAndMessages(null);
            }
        }
        super.onDestroy();
    }
}


----------------------------------------
FILE: src/main/java/com/example/multistreamviewer/MainActivity.kt
----------------------------------------

package com.example.multistreamviewer

import android.annotation.SuppressLint
import android.graphics.Color
import android.os.Build
import android.os.Bundle
import android.view.View
import android.view.WindowInsets
import android.view.WindowInsetsController
import android.view.WindowManager
import android.webkit.WebChromeClient
import android.webkit.WebResourceRequest
import android.webkit.WebView
import android.webkit.WebViewClient
import android.widget.*
import androidx.appcompat.app.AppCompatActivity
import androidx.core.view.isVisible

class MainActivity : AppCompatActivity() {

    private lateinit var webViews: Array<WebView?>
    private lateinit var containers: Array<FrameLayout?>
    private lateinit var statusTexts: Array<TextView?>
    
    private lateinit var urlInput: EditText
    private lateinit var btnLoad: Button
    private lateinit var btnBack: ImageButton
    private lateinit var btnForward: ImageButton
    private lateinit var btnRefresh: ImageButton
    private lateinit var btnHome: ImageButton
    private lateinit var tvStatus: TextView
    private lateinit var controlsContainer: LinearLayout
    private lateinit var fabToggle: com.google.android.material.floatingactionbutton.FloatingActionButton
    
    private var activeWebViewIndex = 0

    @SuppressLint("SetJavaScriptEnabled")
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        
        // Configurar fullscreen imediatamente
        setupFullscreen()
        
        setContentView(R.layout.activity_main)
        
        setupViews()
        setupWebViews()
        setupListeners()
        
        // Carregar URLs padr√£o
        loadDefaultUrls()
    }

    private fun setupFullscreen() {
        // Esconder a barra de status e navega√ß√£o
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.R) {
            window.setDecorFitsSystemWindows(false)
            val controller = window.insetsController
            controller?.hide(WindowInsets.Type.statusBars() or WindowInsets.Type.navigationBars())
            controller?.systemBarsBehavior = WindowInsetsController.BEHAVIOR_SHOW_TRANSIENT_BARS_BY_SWIPE
        } else {
            @Suppress("DEPRECATION")
            window.setFlags(
                WindowManager.LayoutParams.FLAG_FULLSCREEN,
                WindowManager.LayoutParams.FLAG_FULLSCREEN
            )
        }
        
        // Manter tela ligada
        window.addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON)
    }

    private fun setupViews() {
        urlInput = findViewById(R.id.url_input)
        btnLoad = findViewById(R.id.btn_load)
        btnBack = findViewById(R.id.btn_back)
        btnForward = findViewById(R.id.btn_forward)
        btnRefresh = findViewById(R.id.btn_refresh)
        btnHome = findViewById(R.id.btn_home)
        tvStatus = findViewById(R.id.tv_status)
        controlsContainer = findViewById(R.id.controls_container)
        fabToggle = findViewById(R.id.fab_toggle)
        
        // Inicializar arrays
        webViews = arrayOf(
            findViewById(R.id.webview_1),
            findViewById(R.id.webview_2),
            findViewById(R.id.webview_3),
            findViewById(R.id.webview_4)
        )
        
        containers = arrayOf(
            findViewById(R.id.container_1),
            findViewById(R.id.container_2),
            findViewById(R.id.container_3),
            findViewById(R.id.container_4)
        )
        
        statusTexts = arrayOf(
            findViewById(R.id.tv_webview_1),
            findViewById(R.id.tv_webview_2),
            findViewById(R.id.tv_webview_3),
            findViewById(R.id.tv_webview_4)
        )
    }

    @SuppressLint("SetJavaScriptEnabled")
    private fun setupWebViews() {
        for (i in webViews.indices) {
            webViews[i]?.apply {
                // Configura√ß√µes do WebView
                settings.javaScriptEnabled = true
                settings.domStorageEnabled = true
                settings.mediaPlaybackRequiresUserGesture = false
                settings.allowFileAccess = true
                settings.allowContentAccess = true
                
                // Otimiza√ß√µes para v√≠deo
                settings.useWideViewPort = true
                settings.loadWithOverviewMode = true
                settings.builtInZoomControls = true
                settings.displayZoomControls = false
                
                // Client personalizado
                webViewClient = object : WebViewClient() {
                    override fun shouldOverrideUrlLoading(
                        view: WebView?,
                        request: WebResourceRequest?
                    ): Boolean {
                        return false
                    }
                    
                    override fun onPageFinished(view: WebView?, url: String?) {
                        super.onPageFinished(view, url)
                        // Esconder texto de status quando a p√°gina carregar
                        statusTexts[i]?.visibility = View.GONE
                        updateNavigationButtons()
                    }
                }
                
                webChromeClient = object : WebChromeClient() {
                    override fun onProgressChanged(view: WebView?, newProgress: Int) {
                        if (newProgress == 100) {
                            tvStatus.text = "Carregado: ${view?.url?.take(30)}..."
                        } else {
                            tvStatus.text = "Carregando: $newProgress%"
                        }
                    }
                }
                
                // Listener para clique (selecionar WebView ativo)
                setOnClickListener {
                    selectWebView(i)
                }
            }
        }
        
        // Selecionar primeiro WebView por padr√£o
        selectWebView(0)
    }

    private fun setupListeners() {
        btnLoad.setOnClickListener {
            val url = urlInput.text.toString().trim()
            if (url.isNotEmpty()) {
                loadUrlInActiveWebView(url)
            }
        }
        
        btnBack.setOnClickListener {
            webViews[activeWebViewIndex]?.takeIf { it.canGoBack() }?.goBack()
        }
        
        btnForward.setOnClickListener {
            webViews[activeWebViewIndex]?.takeIf { it.canGoForward() }?.goForward()
        }
        
        btnRefresh.setOnClickListener {
            webViews[activeWebViewIndex]?.reload()
        }
        
        btnHome.setOnClickListener {
            // Fechar controles
            controlsContainer.visibility = View.GONE
            fabToggle.visibility = View.VISIBLE
        }
        
        fabToggle.setOnClickListener {
            // Mostrar/ocultar controles
            if (controlsContainer.isVisible) {
                controlsContainer.visibility = View.GONE
            } else {
                controlsContainer.visibility = View.VISIBLE
                urlInput.requestFocus()
            }
        }
        
        // Toque fora dos controles para escond√™-los
        findViewById<View>(R.id.webview_grid).setOnClickListener {
            if (controlsContainer.isVisible) {
                controlsContainer.visibility = View.GONE
            }
        }
    }

    private fun loadDefaultUrls() {
        // URLs padr√£o para teste (podem ser alteradas)
        val defaultUrls = arrayOf(
            "https://www.youtube.com",
            "https://www.twitch.tv",
            "https://vimeo.com",
            "https://www.dailymotion.com"
        )
        
        for (i in webViews.indices) {
            if (i < defaultUrls.size) {
                webViews[i]?.loadUrl(defaultUrls[i])
                statusTexts[i]?.text = "Carregando ${defaultUrls[i].take(20)}..."
            }
        }
    }

    private fun selectWebView(index: Int) {
        // Remover sele√ß√£o anterior
        containers[activeWebViewIndex]?.setBackgroundColor(Color.BLACK)
        
        // Nova sele√ß√£o
        activeWebViewIndex = index
        containers[index]?.setBackgroundColor(Color.parseColor("#CC6200EE"))
        
        // Atualizar URL no input
        webViews[index]?.url?.let { url ->
            urlInput.setText(url)
        }
        
        updateNavigationButtons()
        tvStatus.text = "WebView ${index + 1} selecionado"
    }

    private fun loadUrlInActiveWebView(url: String) {
        val formattedUrl = if (!url.startsWith("http")) {
            "https://$url"
        } else {
            url
        }
        
        statusTexts[activeWebViewIndex]?.apply {
            text = "Carregando..."
            visibility = View.VISIBLE
        }
        
        webViews[activeWebViewIndex]?.loadUrl(formattedUrl)
        tvStatus.text = "Carregando: $formattedUrl"
    }

    private fun updateNavigationButtons() {
        val currentWebView = webViews[activeWebViewIndex]
        btnBack.isEnabled = currentWebView?.canGoBack() == true
        btnForward.isEnabled = currentWebView?.canGoForward() == true
    }

    override fun onBackPressed() {
        if (controlsContainer.isVisible) {
            controlsContainer.visibility = View.GONE
            return
        }
        
        if (webViews[activeWebViewIndex]?.canGoBack() == true) {
            webViews[activeWebViewIndex]?.goBack()
        } else {
            super.onBackPressed()
        }
    }

    override fun onPause() {
        super.onPause()
        // Pausar todos os WebViews quando a app perde foco
        webViews.forEach { it?.onPause() }
    }

    override fun onResume() {
        super.onResume()
        // Retomar WebViews quando a app ganha foco
        webViews.forEach { it?.onResume() }
    }

    override fun onDestroy() {
        // Limpar WebViews para evitar memory leaks
        webViews.forEach { it?.destroy() }
        super.onDestroy()
    }
}


----------------------------------------
FILE: src/main/res/drawable/ic_refresh.xml
----------------------------------------

<?xml version="1.0" encoding="utf-8"?>
<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp"
    android:height="24dp"
    android:viewportWidth="24"
    android:viewportHeight="24">
    <path
        android:fillColor="#FF000000"
        android:pathData="M17.65,6.35C16.2,4.9 14.21,4 12,4c-4.42,0 -7.99,3.58 -7.99,8s3.57,8 7.99,8c3.73,0 6.84,-2.55 7.73,-6h-2.08c-0.82,2.33 -3.04,4 -5.65,4 -3.31,0 -6,-2.69 -6,-6s2.69,-6 6,-6c1.66,0 3.14,0.69 4.22,1.78L13,11h7V4l-2.35,2.35z" />
</vector>


----------------------------------------
FILE: src/main/res/layout/activity_main.xml
----------------------------------------

<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#000000"
    tools:context=".MainActivity">

    <!-- Grid principal para os players -->
    <androidx.gridlayout.widget.GridLayout
        android:id="@+id/gridLayout"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="#000000">

        <!-- Player 1 Container (ser√° adicionado dinamicamente) -->
        <FrameLayout
            android:id="@+id/playerContainer1"
            android:layout_width="0dp"
            android:layout_height="0dp"
            android:background="#000000">

            <WebView
                android:id="@+id/webView1"
                android:layout_width="match_parent"
                android:layout_height="match_parent" />

            <!-- Overlay de loading -->
            <LinearLayout
                android:id="@+id/loadingOverlay1"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:background="#80000000"
                android:gravity="center"
                android:orientation="vertical"
                android:visibility="gone">

                <ProgressBar
                    android:layout_width="32dp"
                    android:layout_height="32dp"
                    android:indeterminateTint="#1e3c72" />

            </LinearLayout>

            <!-- Painel de controle (aparece ao tocar) -->
            <LinearLayout
                android:id="@+id/controlPanel1"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_gravity="top"
                android:background="#CC1a1a1a"
                android:orientation="horizontal"
                android:padding="6dp"
                android:visibility="gone">

                <Button
                    android:id="@+id/btnBack1"
                    android:layout_width="36dp"
                    android:layout_height="36dp"
                    android:background="#333333"
                    android:text="‚óÄ"
                    android:textColor="#FFFFFF"
                    android:textSize="12sp" />

                <Button
                    android:id="@+id/btnForward1"
                    android:layout_width="36dp"
                    android:layout_height="36dp"
                    android:background="#333333"
                    android:text="‚ñ∂"
                    android:textColor="#FFFFFF"
                    android:textSize="12sp"
                    android:layout_marginStart="4dp" />

                <Button
                    android:id="@+id/btnRefresh1"
                    android:layout_width="36dp"
                    android:layout_height="36dp"
                    android:background="#333333"
                    android:text="üîÑ"
                    android:textColor="#FFFFFF"
                    android:textSize="12sp"
                    android:layout_marginStart="4dp" />

                <View
                    android:layout_width="1dp"
                    android:layout_height="24dp"
                    android:layout_gravity="center"
                    android:layout_marginStart="8dp"
                    android:layout_marginEnd="8dp"
                    android:background="#666666" />

                <Button
                    android:id="@+id/btnZoomOut1"
                    android:layout_width="36dp"
                    android:layout_height="36dp"
                    android:background="#333333"
                    android:text="-"
                    android:textColor="#FFFFFF"
                    android:textSize="16sp" />

                <Button
                    android:id="@+id/btnZoomIn1"
                    android:layout_width="36dp"
                    android:layout_height="36dp"
                    android:background="#333333"
                    android:text="+"
                    android:textColor="#FFFFFF"
                    android:textSize="16sp"
                    android:layout_marginStart="4dp" />

                <Button
                    android:id="@+id/btnFullscreen1"
                    android:layout_width="36dp"
                    android:layout_height="36dp"
                    android:background="#1e3c72"
                    android:text="‚õ∂"
                    android:textColor="#FFFFFF"
                    android:textSize="14sp"
                    android:layout_marginStart="8dp" />

            </LinearLayout>

        </FrameLayout>

        <!-- Player 2 Container -->
        <FrameLayout
            android:id="@+id/playerContainer2"
            android:layout_width="0dp"
            android:layout_height="0dp"
            android:background="#000000">

            <WebView
                android:id="@+id/webView2"
                android:layout_width="match_parent"
                android:layout_height="match_parent" />

            <LinearLayout
                android:id="@+id/loadingOverlay2"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:background="#80000000"
                android:gravity="center"
                android:orientation="vertical"
                android:visibility="gone">

                <ProgressBar
                    android:layout_width="32dp"
                    android:layout_height="32dp"
                    android:indeterminateTint="#1e3c72" />

            </LinearLayout>

            <LinearLayout
                android:id="@+id/controlPanel2"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_gravity="top"
                android:background="#CC1a1a1a"
                android:orientation="horizontal"
                android:padding="6dp"
                android:visibility="gone">

                <Button
                    android:id="@+id/btnBack2"
                    android:layout_width="36dp"
                    android:layout_height="36dp"
                    android:background="#333333"
                    android:text="‚óÄ"
                    android:textColor="#FFFFFF"
                    android:textSize="12sp" />

                <Button
                    android:id="@+id/btnForward2"
                    android:layout_width="36dp"
                    android:layout_height="36dp"
                    android:background="#333333"
                    android:text="‚ñ∂"
                    android:textColor="#FFFFFF"
                    android:textSize="12sp"
                    android:layout_marginStart="4dp" />

                <Button
                    android:id="@+id/btnRefresh2"
                    android:layout_width="36dp"
                    android:layout_height="36dp"
                    android:background="#333333"
                    android:text="üîÑ"
                    android:textColor="#FFFFFF"
                    android:textSize="12sp"
                    android:layout_marginStart="4dp" />

                <View
                    android:layout_width="1dp"
                    android:layout_height="24dp"
                    android:layout_gravity="center"
                    android:layout_marginStart="8dp"
                    android:layout_marginEnd="8dp"
                    android:background="#666666" />

                <Button
                    android:id="@+id/btnZoomOut2"
                    android:layout_width="36dp"
                    android:layout_height="36dp"
                    android:background="#333333"
                    android:text="-"
                    android:textColor="#FFFFFF"
                    android:textSize="16sp" />

                <Button
                    android:id="@+id/btnZoomIn2"
                    android:layout_width="36dp"
                    android:layout_height="36dp"
                    android:background="#333333"
                    android:text="+"
                    android:textColor="#FFFFFF"
                    android:textSize="16sp"
                    android:layout_marginStart="4dp" />

                <Button
                    android:id="@+id/btnFullscreen2"
                    android:layout_width="36dp"
                    android:layout_height="36dp"
                    android:background="#1e3c72"
                    android:text="‚õ∂"
                    android:textColor="#FFFFFF"
                    android:textSize="14sp"
                    android:layout_marginStart="8dp" />

            </LinearLayout>

        </FrameLayout>

        <!-- Player 3 Container -->
        <FrameLayout
            android:id="@+id/playerContainer3"
            android:layout_width="0dp"
            android:layout_height="0dp"
            android:background="#000000">

            <WebView
                android:id="@+id/webView3"
                android:layout_width="match_parent"
                android:layout_height="match_parent" />

            <LinearLayout
                android:id="@+id/loadingOverlay3"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:background="#80000000"
                android:gravity="center"
                android:orientation="vertical"
                android:visibility="gone">

                <ProgressBar
                    android:layout_width="32dp"
                    android:layout_height="32dp"
                    android:indeterminateTint="#1e3c72" />

            </LinearLayout>

            <LinearLayout
                android:id="@+id/controlPanel3"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_gravity="top"
                android:background="#CC1a1a1a"
                android:orientation="horizontal"
                android:padding="6dp"
                android:visibility="gone">

                <Button
                    android:id="@+id/btnBack3"
                    android:layout_width="36dp"
                    android:layout_height="36dp"
                    android:background="#333333"
                    android:text="‚óÄ"
                    android:textColor="#FFFFFF"
                    android:textSize="12sp" />

                <Button
                    android:id="@+id/btnForward3"
                    android:layout_width="36dp"
                    android:layout_height="36dp"
                    android:background="#333333"
                    android:text="‚ñ∂"
                    android:textColor="#FFFFFF"
                    android:textSize="12sp"
                    android:layout_marginStart="4dp" />

                <Button
                    android:id="@+id/btnRefresh3"
                    android:layout_width="36dp"
                    android:layout_height="36dp"
                    android:background="#333333"
                    android:text="üîÑ"
                    android:textColor="#FFFFFF"
                    android:textSize="12sp"
                    android:layout_marginStart="4dp" />

                <View
                    android:layout_width="1dp"
                    android:layout_height="24dp"
                    android:layout_gravity="center"
                    android:layout_marginStart="8dp"
                    android:layout_marginEnd="8dp"
                    android:background="#666666" />

                <Button
                    android:id="@+id/btnZoomOut3"
                    android:layout_width="36dp"
                    android:layout_height="36dp"
                    android:background="#333333"
                    android:text="-"
                    android:textColor="#FFFFFF"
                    android:textSize="16sp" />

                <Button
                    android:id="@+id/btnZoomIn3"
                    android:layout_width="36dp"
                    android:layout_height="36dp"
                    android:background="#333333"
                    android:text="+"
                    android:textColor="#FFFFFF"
                    android:textSize="16sp"
                    android:layout_marginStart="4dp" />

                <Button
                    android:id="@+id/btnFullscreen3"
                    android:layout_width="36dp"
                    android:layout_height="36dp"
                    android:background="#1e3c72"
                    android:text="‚õ∂"
                    android:textColor="#FFFFFF"
                    android:textSize="14sp"
                    android:layout_marginStart="8dp" />

            </LinearLayout>

        </FrameLayout>

        <!-- Player 4 Container -->
        <FrameLayout
            android:id="@+id/playerContainer4"
            android:layout_width="0dp"
            android:layout_height="0dp"
            android:background="#000000">

            <WebView
                android:id="@+id/webView4"
                android:layout_width="match_parent"
                android:layout_height="match_parent" />

            <LinearLayout
                android:id="@+id/loadingOverlay4"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:background="#80000000"
                android:gravity="center"
                android:orientation="vertical"
                android:visibility="gone">

                <ProgressBar
                    android:layout_width="32dp"
                    android:layout_height="32dp"
                    android:indeterminateTint="#1e3c72" />

            </LinearLayout>

            <LinearLayout
                android:id="@+id/controlPanel4"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_gravity="top"
                android:background="#CC1a1a1a"
                android:orientation="horizontal"
                android:padding="6dp"
                android:visibility="gone">

                <Button
                    android:id="@+id/btnBack4"
                    android:layout_width="36dp"
                    android:layout_height="36dp"
                    android:background="#333333"
                    android:text="‚óÄ"
                    android:textColor="#FFFFFF"
                    android:textSize="12sp" />

                <Button
                    android:id="@+id/btnForward4"
                    android:layout_width="36dp"
                    android:layout_height="36dp"
                    android:background="#333333"
                    android:text="‚ñ∂"
                    android:textColor="#FFFFFF"
                    android:textSize="12sp"
                    android:layout_marginStart="4dp" />

                <Button
                    android:id="@+id/btnRefresh4"
                    android:layout_width="36dp"
                    android:layout_height="36dp"
                    android:background="#333333"
                    android:text="üîÑ"
                    android:textColor="#FFFFFF"
                    android:textSize="12sp"
                    android:layout_marginStart="4dp" />

                <View
                    android:layout_width="1dp"
                    android:layout_height="24dp"
                    android:layout_gravity="center"
                    android:layout_marginStart="8dp"
                    android:layout_marginEnd="8dp"
                    android:background="#666666" />

                <Button
                    android:id="@+id/btnZoomOut4"
                    android:layout_width="36dp"
                    android:layout_height="36dp"
                    android:background="#333333"
                    android:text="-"
                    android:textColor="#FFFFFF"
                    android:textSize="16sp" />

                <Button
                    android:id="@+id/btnZoomIn4"
                    android:layout_width="36dp"
                    android:layout_height="36dp"
                    android:background="#333333"
                    android:text="+"
                    android:textColor="#FFFFFF"
                    android:textSize="16sp"
                    android:layout_marginStart="4dp" />

                <Button
                    android:id="@+id/btnFullscreen4"
                    android:layout_width="36dp"
                    android:layout_height="36dp"
                    android:background="#1e3c72"
                    android:text="‚õ∂"
                    android:textColor="#FFFFFF"
                    android:textSize="14sp"
                    android:layout_marginStart="8dp" />

            </LinearLayout>

        </FrameLayout>

    </androidx.gridlayout.widget.GridLayout>

    <!-- Painel inferior foldable -->
    <LinearLayout
        android:id="@+id/bottomPanel"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="bottom|center_horizontal"
        android:background="#1a1a1aCC"
        android:orientation="vertical"
        android:translationY="200dp"
        android:visibility="gone">

        <!-- Linha superior: bot√µes de toggle -->
        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal"
            android:padding="8dp"
            android:gravity="center">

            <Button
                android:id="@+id/btnToggleMenu"
                android:layout_width="wrap_content"
                android:layout_height="36dp"
                android:background="#333333"
                android:text="‚ò∞ Sidebar"
                android:textColor="#FFFFFF"
                android:textSize="12sp"
                android:layout_marginEnd="12dp" />

            <Button
                android:id="@+id/btnToggleOrientation"
                android:layout_width="wrap_content"
                android:layout_height="36dp"
                android:background="#333333"
                android:text="üì± Landscape"
                android:textColor="#FFFFFF"
                android:textSize="12sp" />

        </LinearLayout>

        <!-- Linha inferior: checkboxes -->
        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal"
            android:padding="8dp"
            android:gravity="center"
            android:background="#222222">

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Active Boxes:"
                android:textColor="#CCCCCC"
                android:textSize="11sp"
                android:layout_marginEnd="8dp" />

            <CheckBox
                android:id="@+id/checkBox1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="1"
                android:textColor="#FFFFFF"
                android:textSize="11sp"
                android:layout_marginEnd="8dp" />

            <CheckBox
                android:id="@+id/checkBox2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="2"
                android:textColor="#FFFFFF"
                android:textSize="11sp"
                android:layout_marginEnd="8dp" />

            <CheckBox
                android:id="@+id/checkBox3"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="3"
                android:textColor="#FFFFFF"
                android:textSize="11sp"
                android:layout_marginEnd="8dp" />

            <CheckBox
                android:id="@+id/checkBox4"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="4"
                android:textColor="#FFFFFF"
                android:textSize="11sp" />

        </LinearLayout>

        <!-- Bot√£o para fechar/abrir painel -->
        <Button
            android:id="@+id/btnToggleBottomPanel"
            android:layout_width="40dp"
            android:layout_height="24dp"
            android:layout_gravity="center_horizontal"
            android:background="#444444"
            android:text="‚ñ≤"
            android:textColor="#FFFFFF"
            android:textSize="10sp" />

    </LinearLayout>

    <!-- Menu lateral -->
    <LinearLayout
        android:id="@+id/sideMenu"
        android:layout_width="280dp"
        android:layout_height="match_parent"
        android:layout_gravity="start"
        android:background="#1a1a1aEE"
        android:orientation="vertical"
        android:translationX="-280dp"
        android:visibility="gone">

        <androidx.core.widget.NestedScrollView
            android:layout_width="match_parent"
            android:layout_height="0dp"
            android:layout_weight="1"
            android:padding="12dp">

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="vertical">

                <!-- Cabe√ßalho -->
                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:orientation="horizontal"
                    android:layout_marginBottom="16dp">

                    <TextView
                        android:layout_width="0dp"
                        android:layout_height="wrap_content"
                        android:layout_weight="1"
                        android:text="SETTINGS"
                        android:textColor="#FFFFFF"
                        android:textSize="14sp"
                        android:textStyle="bold" />

                    <Button
                        android:id="@+id/btnCloseMenu"
                        android:layout_width="32dp"
                        android:layout_height="32dp"
                        android:background="#ff4444"
                        android:text="‚úï"
                        android:textColor="#FFFFFF"
                        android:textSize="14sp" />

                </LinearLayout>

                <!-- Layout selection -->
                <TextView
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:text="Layout:"
                    android:textColor="#CCCCCC"
                    android:textSize="11sp"
                    android:layout_marginBottom="4dp" />

                <Spinner
                    android:id="@+id/layoutSpinner"
                    android:layout_width="match_parent"
                    android:layout_height="36dp"
                    android:background="#333333"
                    android:layout_marginBottom="16dp" />

                <!-- Security settings -->
                <TextView
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:text="Security Settings:"
                    android:textColor="#CCCCCC"
                    android:textSize="11sp"
                    android:layout_marginBottom="4dp" />

                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:orientation="vertical"
                    android:background="#333333"
                    android:padding="8dp"
                    android:layout_marginBottom="16dp">

                    <CheckBox
                        android:id="@+id/cbAllowScripts"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:text="Allow Scripts"
                        android:textColor="#FFFFFF"
                        android:textSize="11sp" />

                    <CheckBox
                        android:id="@+id/cbAllowForms"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:text="Allow Forms"
                        android:textColor="#FFFFFF"
                        android:textSize="11sp" />

                    <CheckBox
                        android:id="@+id/cbAllowPopups"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:text="Allow Popups"
                        android:textColor="#FFFFFF"
                        android:textSize="11sp" />

                    <CheckBox
                        android:id="@+id/cbBlockRedirects"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:text="Block Redirects"
                        android:textColor="#FFFFFF"
                        android:textSize="11sp" />

                </LinearLayout>

                <!-- URL Inputs -->
                <TextView
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:text="URL Inputs:"
                    android:textColor="#CCCCCC"
                    android:textSize="11sp"
                    android:layout_marginBottom="4dp" />

                <!-- Player 1 URL -->
                <TextView
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:text="Box 1 URL:"
                    android:textColor="#FFFFFF"
                    android:textSize="10sp"
                    android:layout_marginBottom="2dp" />

                <EditText
                    android:id="@+id/urlInput1"
                    android:layout_width="match_parent"
                    android:layout_height="32dp"
                    android:background="#333333"
                    android:hint="https://..."
                    android:imeOptions="actionGo"
                    android:inputType="textUri"
                    android:paddingStart="8dp"
                    android:paddingEnd="8dp"
                    android:textColor="#FFFFFF"
                    android:textSize="10sp"
                    android:layout_marginBottom="8dp" />

                <!-- Player 2 URL -->
                <TextView
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:text="Box 2 URL:"
                    android:textColor="#FFFFFF"
                    android:textSize="10sp"
                    android:layout_marginBottom="2dp" />

                <EditText
                    android:id="@+id/urlInput2"
                    android:layout_width="match_parent"
                    android:layout_height="32dp"
                    android:background="#333333"
                    android:hint="https://..."
                    android:imeOptions="actionGo"
                    android:inputType="textUri"
                    android:paddingStart="8dp"
                    android:paddingEnd="8dp"
                    android:textColor="#FFFFFF"
                    android:textSize="10sp"
                    android:layout_marginBottom="8dp" />

                <!-- Player 3 URL -->
                <TextView
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:text="Box 3 URL:"
                    android:textColor="#FFFFFF"
                    android:textSize="10sp"
                    android:layout_marginBottom="2dp" />

                <EditText
                    android:id="@+id/urlInput3"
                    android:layout_width="match_parent"
                    android:layout_height="32dp"
                    android:background="#333333"
                    android:hint="https://..."
                    android:imeOptions="actionGo"
                    android:inputType="textUri"
                    android:paddingStart="8dp"
                    android:paddingEnd="8dp"
                    android:textColor="#FFFFFF"
                    android:textSize="10sp"
                    android:layout_marginBottom="8dp" />

                <!-- Player 4 URL -->
                <TextView
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:text="Box 4 URL:"
                    android:textColor="#FFFFFF"
                    android:textSize="10sp"
                    android:layout_marginBottom="2dp" />

                <EditText
                    android:id="@+id/urlInput4"
                    android:layout_width="match_parent"
                    android:layout_height="32dp"
                    android:background="#333333"
                    android:hint="https://..."
                    android:imeOptions="actionGo"
                    android:inputType="textUri"
                    android:paddingStart="8dp"
                    android:paddingEnd="8dp"
                    android:textColor="#FFFFFF"
                    android:textSize="10sp"
                    android:layout_marginBottom="16dp" />

            </LinearLayout>

        </androidx.core.widget.NestedScrollView>

        <!-- Bot√µes de a√ß√£o -->
        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal"
            android:padding="8dp"
            android:background="#222222">

            <Button
                android:id="@+id/btnLoadAll"
                android:layout_width="0dp"
                android:layout_height="36dp"
                android:layout_weight="1"
                android:background="#1e3c72"
                android:text="LOAD ALL"
                android:textColor="#FFFFFF"
                android:textSize="11sp"
                android:layout_marginEnd="4dp" />

            <Button
                android:id="@+id/btnReloadAll"
                android:layout_width="0dp"
                android:layout_height="36dp"
                android:layout_weight="1"
                android:background="#1e3c72"
                android:text="RELOAD ALL"
                android:textColor="#FFFFFF"
                android:textSize="11sp"
                android:layout_marginEnd="4dp" />

            <Button
                android:id="@+id/btnClearAll"
                android:layout_width="0dp"
                android:layout_height="36dp"
                android:layout_weight="1"
                android:background="#ff4444"
                android:text="CLEAR ALL"
                android:textColor="#FFFFFF"
                android:textSize="11sp" />

        </LinearLayout>

    </LinearLayout>

</FrameLayout>


----------------------------------------
FILE: src/main/res/mipmap-hdpi/ic_launcher.png
----------------------------------------

placeholder


----------------------------------------
FILE: src/main/res/mipmap-hdpi/ic_launcher_round.png
----------------------------------------



----------------------------------------
FILE: src/main/res/mipmap-mdpi/ic_launcher.png
----------------------------------------

placeholder


----------------------------------------
FILE: src/main/res/mipmap-mdpi/ic_launcher_round.png
----------------------------------------



----------------------------------------
FILE: src/main/res/mipmap-xhdpi/ic_launcher.png
----------------------------------------

placeholder


----------------------------------------
FILE: src/main/res/mipmap-xhdpi/ic_launcher_round.png
----------------------------------------



----------------------------------------
FILE: src/main/res/mipmap-xxhdpi/ic_launcher.png
----------------------------------------

placeholder


----------------------------------------
FILE: src/main/res/mipmap-xxhdpi/ic_launcher_round.png
----------------------------------------



----------------------------------------
FILE: src/main/res/mipmap-xxxhdpi/ic_launcher.png
----------------------------------------

placeholder


----------------------------------------
FILE: src/main/res/mipmap-xxxhdpi/ic_launcher_round.png
----------------------------------------



----------------------------------------
FILE: src/main/res/values/colors.xml
----------------------------------------

<?xml version="1.0" encoding="utf-8"?>
<resources>
    <color name="purple_200">#FFBB86FC</color>
    <color name="purple_500">#FF6200EE</color>
    <color name="purple_700">#FF3700B3</color>
    <color name="teal_200">#FF03DAC5</color>
    <color name="teal_700">#FF018786</color>
    <color name="black">#FF000000</color>
    <color name="white">#FFFFFFFF</color>
    <color name="dark_gray">#FF1A1A1A</color>
    <color name="medium_gray">#FF333333</color>
    <color name="accent_blue">#FF1E3C72</color>
    <color name="error_red">#FFFF4444</color>
</resources>


----------------------------------------
FILE: src/main/res/values/strings.xml
----------------------------------------

<resources>
    <string name="app_name">MultiStream Viewer</string>
    <string name="load_all">Load All</string>
    <string name="reload_all">Reload All</string>
    <string name="clear_all">Clear All</string>
    <string name="toggle_menu">Menu</string>
    <string name="toggle_orientation">Orientation</string>
    <string name="close_menu">Close</string>
    <string-array name="layout_options">
        <item>1x1</item>
        <item>1x2</item>
        <item>2x1</item>
        <item>1x3</item>
        <item>3x1</item>
        <item>1x4</item>
        <item>4x1</item>
        <item>2x2</item>
    </string-array>
</resources>


----------------------------------------
FILE: src/main/res/values/themes.xml
----------------------------------------

<resources xmlns:tools="http://schemas.android.com/tools">
    <style name="Theme.MultiStreamViewer" parent="Theme.MaterialComponents.DayNight.DarkActionBar">
        <item name="colorPrimary">@color/accent_blue</item>
        <item name="colorPrimaryVariant">@color/purple_700</item>
        <item name="colorOnPrimary">@color/white</item>
        <item name="colorSecondary">@color/teal_200</item>
        <item name="colorSecondaryVariant">@color/teal_700</item>
        <item name="colorOnSecondary">@color/black</item>
        <item name="android:statusBarColor">?attr/colorPrimaryVariant</item>
        <item name="android:navigationBarColor">@color/black</item>
    </style>

    <style name="Theme.MultiStreamViewer.NoActionBar">
        <item name="windowActionBar">false</item>
        <item name="windowNoTitle">true</item>
    </style>

    <style name="Theme.MultiStreamViewer.NoActionBar.FullScreen" parent="Theme.MultiStreamViewer.NoActionBar">
        <item name="android:windowFullscreen">true</item>
        <item name="android:windowContentOverlay">@null</item>
        <item name="android:windowBackground">@color/black</item>
    </style>
</resources>


========================================
‚úÖ Dump conclu√≠do com sucesso.
